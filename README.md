# ä»Šå¤©åƒä»€ä¹ˆ (What2Eat) - ç‚¹é¤æ¨é€ç³»ç»Ÿ

ä¸€æ¬¾é¢å‘æœ‹å‹ã€æƒ…ä¾£çš„ç¤¾äº¤ç‚¹é¤åº”ç”¨ï¼Œè§£å†³"ä»Šå¤©åƒä»€ä¹ˆ"çš„é€‰æ‹©å›°éš¾é—®é¢˜ã€‚ç”¨æˆ·å¯ä»¥æµè§ˆèœå“ã€ç‚¹èœå¹¶æ¨é€ç»™å¥½å‹ï¼Œå¥½å‹å¯ä»¥æŸ¥çœ‹å·²æ¨é€çš„èœå•åˆ—è¡¨ï¼Œå…±åŒå†³å®šä»Šå¤©åƒä»€ä¹ˆã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

- âœ… **ç”¨æˆ·æ³¨å†Œ/ç™»å½•** - JWTè®¤è¯ï¼Œå®‰å…¨å¯é 
- âœ… **æµè§ˆèœå“** - æŒ‰åˆ†ç±»æµè§ˆï¼ˆçƒ­èœã€å‡‰èœã€ä¸»é£Ÿã€æ±¤å“ã€é¥®æ–™ï¼‰
- âœ… **æ·»åŠ è´­ç‰©è½¦** - é€‰æ‹©å–œæ¬¢çš„èœå“æ·»åŠ åˆ°è´­ç‰©è½¦
- âœ… **æ¨é€èœå•** - ä¸€é”®æ¨é€èœå•ç»™å¥½å‹
- âœ… **æŸ¥çœ‹æ¨é€** - æŸ¥çœ‹å¥½å‹æ¨é€çš„èœå•åˆ—è¡¨ï¼ˆä»…å¥½å‹å¯è§ï¼‰
- âœ… **æ‰«ç æ·»åŠ å¥½å‹** - é€šè¿‡äºŒç»´ç æ·»åŠ å¥½å‹ï¼ˆåŒå‘å¥½å‹å…³ç³»ï¼‰
- âœ… **ä¸Šä¼ èœå“** - ç”¨æˆ·å¯ä»¥ä¸Šä¼ æ–°èœå“ï¼ˆå¸¦å›¾ç‰‡ï¼‰
- âœ… **æƒé™æ§åˆ¶** - åªèƒ½åˆ é™¤è‡ªå·±çš„æ¨é€
- âœ… **å¥½å‹å¯è§æ€§** - åªæœ‰å¥½å‹æ‰èƒ½çœ‹åˆ°å½¼æ­¤çš„æ¨é€

## ğŸ“‹ æŠ€æœ¯æ ˆ

### åç«¯
| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| Spring Boot | 3.2.1 | Webæ¡†æ¶ |
| JDK | 17 | Javaç‰ˆæœ¬ |
| MySQL | 8.0+ | æ•°æ®åº“ |
| Spring Data JPA | 3.2.1 | ORMæ¡†æ¶ |
| Spring WebSocket | 3.2.1 | WebSocketæ”¯æŒ |
| JWT | 0.12.3 | Tokenè®¤è¯ |
| BCrypt | - | å¯†ç åŠ å¯† |
| SpringDoc | 2.3.0 | APIæ–‡æ¡£ |
| Maven | 3.9+ | æ„å»ºå·¥å…· |

### å‰ç«¯ï¼ˆAndroidï¼‰
| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| Java | - | å¼€å‘è¯­è¨€ |
| Min SDK | 24 (Android 7.0) | æœ€ä½ç‰ˆæœ¬ |
| Target SDK | 34 (Android 14) | ç›®æ ‡ç‰ˆæœ¬ |
| Retrofit | 2.9.0 | ç½‘ç»œè¯·æ±‚ |
| OkHttp | 4.12.0 | HTTPå®¢æˆ·ç«¯ |
| Glide | 4.16.0 | å›¾ç‰‡åŠ è½½ |
| ZXing | 4.3.0 | äºŒç»´ç æ‰«æ |
| Gson | 2.10.1 | JSONè§£æ |
| CircleImageView | 3.1.0 | åœ†å½¢å¤´åƒ |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

#### åç«¯ç¯å¢ƒ
- **JDK 17+** - [ä¸‹è½½åœ°å€](https://www.oracle.com/java/technologies/downloads/#java17)
- **Maven 3.9+** - [ä¸‹è½½åœ°å€](https://maven.apache.org/download.cgi)
- **MySQL 8.0+** - [ä¸‹è½½åœ°å€](https://dev.mysql.com/downloads/mysql/)
- **IntelliJ IDEA 2023.2+**ï¼ˆæ¨èï¼‰æˆ– [VS Code](https://code.visualstudio.com/)

#### å‰ç«¯ç¯å¢ƒ
- **Android Studio Hedgehog (2023.1.1)+** - [ä¸‹è½½åœ°å€](https://developer.android.com/studio)
- **JDK 17**
- **Android SDK 24+**
- **AndroidçœŸæœºæˆ–æ¨¡æ‹Ÿå™¨**

---

## ğŸ“¦ è¯¦ç»†å®‰è£…æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šæ•°æ®åº“é…ç½®

#### 1. å®‰è£…MySQL
ç¡®ä¿å·²å®‰è£…MySQL 8.0+ï¼Œå¹¶å¯åŠ¨MySQLæœåŠ¡ã€‚

**Windowså¯åŠ¨MySQLæœåŠ¡ï¼š**
```bash
net start MySQL80
```

**Mac/Linuxå¯åŠ¨MySQLæœåŠ¡ï¼š**
```bash
sudo systemctl start mysql
# æˆ–
sudo service mysql start
```

#### 2. åˆ›å»ºæ•°æ®åº“
ä½¿ç”¨é¡¹ç›®æä¾›çš„SQLè„šæœ¬åˆå§‹åŒ–æ•°æ®åº“ï¼š

**Windows:**
```bash
cd C:\claude-project\eatwhat
mysql -u root -p < init_database.sql
```

**Mac/Linux:**
```bash
cd /path/to/eatwhat
mysql -u root -p < init_database.sql
```

**æ‰‹åŠ¨åˆ›å»ºï¼ˆå¤‡é€‰æ–¹æ¡ˆï¼‰ï¼š**
```sql
-- ç™»å½•MySQL
mysql -u root -p

-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE what2eat CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- ä½¿ç”¨æ•°æ®åº“
USE what2eat;

-- åˆ›å»ºç”¨æˆ·è¡¨
CREATE TABLE user (
    user_id VARCHAR(255) PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    nickname VARCHAR(100),
    avatar VARCHAR(500),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- åˆ›å»ºèœå“è¡¨
CREATE TABLE dish (
    dish_id VARCHAR(255) PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    description TEXT,
    price DECIMAL(10,2) NOT NULL,
    category VARCHAR(50),
    image_url VARCHAR(500),
    uploader_id VARCHAR(255),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (uploader_id) REFERENCES user(user_id)
);

-- åˆ›å»ºæ¨é€è®°å½•è¡¨
CREATE TABLE push (
    push_id VARCHAR(255) PRIMARY KEY,
    pusher_id VARCHAR(255) NOT NULL,
    pusher_name VARCHAR(100),
    pusher_avatar VARCHAR(500),
    dishes JSON,
    total_amount DECIMAL(10,2),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (pusher_id) REFERENCES user(user_id)
);

-- åˆ›å»ºå¥½å‹å…³ç³»è¡¨
CREATE TABLE friendship (
    id VARCHAR(255) PRIMARY KEY,
    user_id VARCHAR(255) NOT NULL,
    friend_id VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES user(user_id),
    FOREIGN KEY (friend_id) REFERENCES user(user_id),
    UNIQUE KEY unique_friendship (user_id, friend_id)
);
```

#### 3. é…ç½®æ•°æ®åº“è¿æ¥
ç¼–è¾‘ `springboot-backend/src/main/resources/application.yml`ï¼š

```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/what2eat?useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true
    username: root
    password: 123456  # ä¿®æ”¹ä¸ºæ‚¨çš„MySQLå¯†ç 
```

---

### ç¬¬äºŒæ­¥ï¼šå¯åŠ¨åç«¯

#### æ–¹å¼1ï¼šä½¿ç”¨IntelliJ IDEAï¼ˆæ¨èï¼‰

1. **æ‰“å¼€é¡¹ç›®**
   - å¯åŠ¨IntelliJ IDEA
   - ç‚¹å‡» `File` â†’ `Open`
   - é€‰æ‹© `springboot-backend` ç›®å½•
   - ç­‰å¾…Mavenä¾èµ–ä¸‹è½½å®Œæˆ

2. **é…ç½®è¿è¡Œ**
   - æ‰¾åˆ° `src/main/java/com/what2eat/What2EatApplication.java`
   - å³é”®ç‚¹å‡»æ–‡ä»¶ â†’ `Run 'What2EatApplication'`
   - æˆ–ç‚¹å‡»æ–‡ä»¶å·¦ä¾§çš„ç»¿è‰²è¿è¡ŒæŒ‰é’®

3. **éªŒè¯å¯åŠ¨**
   - æ§åˆ¶å°è¾“å‡º `Started What2EatApplication` è¡¨ç¤ºå¯åŠ¨æˆåŠŸ
   - è®¿é—® http://localhost:8883/api/swagger-ui.html æŸ¥çœ‹APIæ–‡æ¡£

#### æ–¹å¼2ï¼šä½¿ç”¨Mavenå‘½ä»¤è¡Œ

**Windows:**
```bash
cd springboot-backend
mvn spring-boot:run
```

**Mac/Linux:**
```bash
cd springboot-backend
./mvnw spring-boot:run
```

#### æ–¹å¼3ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆWindowsï¼‰

ç›´æ¥åŒå‡»é¡¹ç›®æ ¹ç›®å½•çš„ `start-backend.bat` æ–‡ä»¶ã€‚

#### åç«¯å¯åŠ¨æˆåŠŸæ ‡å¿—

çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºè¡¨ç¤ºå¯åŠ¨æˆåŠŸï¼š

```
========================================
   ä»Šå¤©åƒä»€ä¹ˆ - åç«¯æœåŠ¡å¯åŠ¨æˆåŠŸ
   APIåœ°å€: http://localhost:8883/api/swagger-ui.html
   WebSocket: ws://localhost:8883/api/ws
========================================
```

**åç«¯é»˜è®¤ç«¯å£ï¼š8883**

---

### ç¬¬ä¸‰æ­¥ï¼šé…ç½®å¹¶è¿è¡ŒAndroidåº”ç”¨

#### 1. æ‰“å¼€é¡¹ç›®

1. å¯åŠ¨Android Studio
2. ç‚¹å‡» `File` â†’ `Open`
3. é€‰æ‹© `android-app` ç›®å½•
4. ç­‰å¾…GradleåŒæ­¥å®Œæˆï¼ˆé¦–æ¬¡å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿï¼‰

#### 2. é…ç½®åç«¯åœ°å€

**é‡è¦ï¼š** å¿…é¡»é…ç½®æ­£ç¡®çš„åç«¯åœ°å€æ‰èƒ½æ­£å¸¸ä½¿ç”¨ã€‚

##### æ–¹æ¡ˆAï¼šçœŸæœºè°ƒè¯•ï¼ˆæ¨èï¼‰

1. **è·å–ç”µè„‘çš„å±€åŸŸç½‘IPåœ°å€**

**Windows:**
```bash
ipconfig
# æŸ¥æ‰¾ "æ— çº¿å±€åŸŸç½‘é€‚é…å™¨ WLAN" æˆ– "ä»¥å¤ªç½‘é€‚é…å™¨" ä¸‹çš„ IPv4 åœ°å€
# ä¾‹å¦‚ï¼š192.168.1.100
```

**Mac:**
```bash
ifconfig
# æŸ¥æ‰¾ en0 ä¸‹çš„ inet åœ°å€
```

2. **ä¿®æ”¹ build.gradle.kts**

ç¼–è¾‘ `android-app/app/build.gradle.kts`ï¼Œæ‰¾åˆ° `debug` é…ç½®å—ï¼š

```kotlin
buildTypes {
    debug {
        // çœŸæœºæµ‹è¯•ï¼šä¿®æ”¹ä¸ºæ‚¨çš„ç”µè„‘å±€åŸŸç½‘IP
        buildConfigField("String", "BASE_URL", "\"http://192.168.1.100:8883/api/\"")
        buildConfigField("String", "WS_URL", "\"ws://192.168.1.100:8883/api/ws\"")

        // æ¨¡æ‹Ÿå™¨æµ‹è¯•ï¼šä½¿ç”¨10.0.2.2
        // buildConfigField("String", "BASE_URL", "\"http://10.0.2.2:8883/api/\"")
        // buildConfigField("String", "WS_URL", "\"ws://10.0.2.2:8883/api/ws\"")
    }
}
```

**æ›¿æ¢ `192.168.1.100` ä¸ºæ‚¨çš„å®é™…IPåœ°å€ï¼**

3. **åŒæ­¥Gradle**
   - ä¿®æ”¹åç‚¹å‡»é¡¶éƒ¨å‡ºç°çš„ `Sync Now`
   - æˆ–ç‚¹å‡» `File` â†’ `Sync Project with Gradle Files`

##### æ–¹æ¡ˆBï¼šæ¨¡æ‹Ÿå™¨è°ƒè¯•

ä½¿ç”¨Androidæ¨¡æ‹Ÿå™¨æ—¶ï¼Œéœ€è¦ä½¿ç”¨ç‰¹æ®ŠIP `10.0.2.2`ï¼ˆè¿™æ˜¯æ¨¡æ‹Ÿå™¨è®¿é—®ä¸»æœºçš„åˆ«åï¼‰ï¼š

```kotlin
buildTypes {
    debug {
        // æ¨¡æ‹Ÿå™¨æµ‹è¯•
        buildConfigField("String", "BASE_URL", "\"http://10.0.2.2:8883/api/\"")
        buildConfigField("String", "WS_URL", "\"ws://10.0.2.2:8883/api/ws\"")
    }
}
```

#### 3. è¿æ¥è®¾å¤‡

**çœŸæœºè°ƒè¯•ï¼š**
1. æ‰‹æœºå¼€å¯å¼€å‘è€…é€‰é¡¹
2. å¯ç”¨USBè°ƒè¯•
3. ç”¨USBçº¿è¿æ¥ç”µè„‘
4. æ‰‹æœºä¸Šå…è®¸USBè°ƒè¯•æˆæƒ
5. Android Studioé¡¶éƒ¨åº”æ˜¾ç¤ºè®¾å¤‡å‹å·

**æ¨¡æ‹Ÿå™¨è°ƒè¯•ï¼š**
1. åœ¨Android Studioä¸­ç‚¹å‡» `Tools` â†’ `AVD Manager`
2. åˆ›å»ºæˆ–é€‰æ‹©ä¸€ä¸ªæ¨¡æ‹Ÿå™¨
3. ç‚¹å‡»å¯åŠ¨æŒ‰é’®

#### 4. è¿è¡Œåº”ç”¨

1. ç‚¹å‡»å·¥å…·æ çš„ç»¿è‰²è¿è¡ŒæŒ‰é’® â–¶ï¸
2. æˆ–æŒ‰å¿«æ·é”® `Shift + F10` (Windows/Linux) / `Control + R` (Mac)
3. é€‰æ‹©ç›®æ ‡è®¾å¤‡
4. ç­‰å¾…åº”ç”¨å®‰è£…å¹¶å¯åŠ¨

#### 5. éªŒè¯è¿æ¥

åº”ç”¨å¯åŠ¨åï¼š
1. æ‰“å¼€æ³¨å†Œé¡µé¢
2. è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œç‚¹å‡»æ³¨å†Œ
3. æ³¨å†ŒæˆåŠŸåè‡ªåŠ¨ç™»å½•
4. è¿›å…¥ä¸»é¡µè¯´æ˜è¿æ¥æˆåŠŸï¼

---

## ğŸ“± æµ‹è¯•è´¦å·

é¡¹ç›®é¢„ç½®äº†æµ‹è¯•è´¦å·ï¼ˆå¦‚æœè¿è¡Œäº† `init_database.sql`ï¼‰ï¼š

| ç”¨æˆ·å | å¯†ç  | æ˜µç§° |
|--------|------|------|
| testuser1 | 123456 | æµ‹è¯•ç”¨æˆ·1 |
| testuser2 | 123456 | æµ‹è¯•ç”¨æˆ·2 |
| testuser3 | 123456 | æµ‹è¯•ç”¨æˆ·3 |

---

## ğŸ¯ åŠŸèƒ½æ¼”ç¤ºæµç¨‹

### 1. æ·»åŠ å¥½å‹æµç¨‹

```
ç”¨æˆ·A                     ç”¨æˆ·B
  |                         |
  |--ç‚¹å‡»"æˆ‘çš„äºŒç»´ç "        |
  |                         |
  |     æ˜¾ç¤ºäºŒç»´ç            |
  |                         |
  |          ç”¨æˆ·Bæ‰«æäºŒç»´ç  |
  |                         |
  |                         |--è°ƒç”¨æ‰«ç åŠŸèƒ½
  |                         |
  |<---------è§£æå‡ºç”¨æˆ·Açš„ID
  |                         |
  |                         |--ç‚¹å‡»"æ·»åŠ å¥½å‹"
  |                         |
  |<----åˆ›å»ºåŒå‘å¥½å‹å…³ç³»---->|
  |                         |
  |                         |
  âœ“ äº’ç›¸æˆä¸ºå¥½å‹ï¼Œå¯ä»¥æŸ¥çœ‹å¯¹æ–¹çš„æ¨é€
```

### 2. ç‚¹èœæ¨é€æµç¨‹

```
ç”¨æˆ·A
  |
  |--ç‚¹å‡»"å¼€å§‹ç‚¹èœ"
  |
  |--é€‰æ‹©åˆ†ç±»ï¼ˆçƒ­èœ/å‡‰èœç­‰ï¼‰
  |
  |--æ·»åŠ èœå“åˆ°è´­ç‰©è½¦
  |
  |--ç‚¹å‡»"æ¨é€èœå•"
  |
  |--è°ƒç”¨ /api/push
  |
  |--æ¨é€æˆåŠŸ
  |
  âœ“ å¥½å‹å¯ä»¥åœ¨æ¨é€åˆ—è¡¨çœ‹åˆ°
```

---

## ğŸ”§ å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1ï¼šåç«¯å¯åŠ¨å¤±è´¥

**ç—‡çŠ¶ï¼š** è¿è¡ŒåæŠ¥é”™ "Connection refused" æˆ– "Communications link failure"

**è§£å†³æ–¹æ³•ï¼š**
1. æ£€æŸ¥MySQLæ˜¯å¦å¯åŠ¨
   ```bash
   # Windows
   net start MySQL80

   # Mac/Linux
   sudo systemctl start mysql
   ```

2. æ£€æŸ¥æ•°æ®åº“æ˜¯å¦åˆ›å»º
   ```bash
   mysql -u root -p
   SHOW DATABASES;
   # ç¡®è®¤å­˜åœ¨ what2eat æ•°æ®åº“
   ```

3. æ£€æŸ¥å¯†ç æ˜¯å¦æ­£ç¡®
   - æŸ¥çœ‹ `application.yml` ä¸­çš„å¯†ç 
   - ç¡®è®¤MySQL rootç”¨æˆ·å¯†ç ä¸€è‡´

### é—®é¢˜2ï¼šAndroidæ— æ³•è¿æ¥åç«¯

**ç—‡çŠ¶ï¼š** ç½‘ç»œè¯·æ±‚å¤±è´¥ï¼Œæç¤º "UnknownHostException" æˆ– "Connection refused"

**æ£€æŸ¥æ¸…å•ï¼š**

âœ… **åç«¯æ˜¯å¦å¯åŠ¨ï¼Ÿ**
- æµè§ˆå™¨è®¿é—® http://localhost:8883/api/swagger-ui.html
- èƒ½çœ‹åˆ°APIæ–‡æ¡£è¯´æ˜åç«¯æ­£å¸¸

âœ… **æ‰‹æœºå’Œç”µè„‘æ˜¯å¦åœ¨åŒä¸€WiFiï¼Ÿ**
- ç¡®ä¿æ‰‹æœºè¿æ¥çš„WiFiå’Œç”µè„‘ç›¸åŒ
- ä¸è¦ä½¿ç”¨æ‰‹æœºæµé‡

âœ… **IPåœ°å€æ˜¯å¦æ­£ç¡®ï¼Ÿ**
- Windows: æ‰“å¼€å‘½ä»¤è¡Œæ‰§è¡Œ `ipconfig`
- Mac: æ‰“å¼€ç»ˆç«¯æ‰§è¡Œ `ifconfig`
- æ‰¾åˆ°IPv4åœ°å€ï¼ˆå¦‚ 192.168.1.100ï¼‰
- ç¡®ä¿ `build.gradle.kts` ä¸­çš„IPä¸æ­¤ä¸€è‡´

âœ… **é˜²ç«å¢™æ˜¯å¦é˜»æ­¢ï¼Ÿ**
- Windows: å…è®¸Javaé€šè¿‡é˜²ç«å¢™
  - æ§åˆ¶é¢æ¿ â†’ Windows Defender é˜²ç«å¢™ â†’ å…è®¸åº”ç”¨é€šè¿‡é˜²ç«å¢™
  - æ‰¾åˆ°Javaå¹¶å‹¾é€‰"ä¸“ç”¨"å’Œ"å…¬ç”¨"

âœ… **æ˜¯å¦æ·»åŠ äº†ç½‘ç»œæƒé™ï¼Ÿ**
- æ£€æŸ¥ `AndroidManifest.xml` åŒ…å«ï¼š
  ```xml
  <uses-permission android:name="android.permission.INTERNET" />
  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
  ```

âœ… **æ˜¯å¦ä½¿ç”¨äº†æ˜æ–‡æµé‡ï¼Ÿ**
- æ£€æŸ¥ `AndroidManifest.xml` application æ ‡ç­¾åŒ…å«ï¼š
  ```xml
  android:usesCleartextTraffic="true"
  ```

### é—®é¢˜3ï¼šæ‰«ç åŠŸèƒ½æ— æ³•ä½¿ç”¨

**ç—‡çŠ¶ï¼š** ç‚¹å‡»æ‰«ä¸€æ‰«åé—ªé€€æˆ–é»‘å±

**è§£å†³æ–¹æ³•ï¼š**

1. **æ£€æŸ¥ç›¸æœºæƒé™**
   - è®¾ç½® â†’ åº”ç”¨ â†’ ä»Šå¤©åƒä»€ä¹ˆ â†’ æƒé™
   - å…è®¸ç›¸æœºæƒé™

2. **æ£€æŸ¥Min SDKç‰ˆæœ¬**
   - é¡¹ç›®Min SDKä¸º24ï¼Œç¡®ä¿è®¾å¤‡Androidç‰ˆæœ¬â‰¥7.0

3. **æ¸…ç†é‡æ–°ç¼–è¯‘**
   ```bash
   # Android Studio
   Build â†’ Clean Project
   Build â†’ Rebuild Project
   ```

### é—®é¢˜4ï¼šå›¾ç‰‡ä¸Šä¼ å¤±è´¥

**ç—‡çŠ¶ï¼š** ä¸Šä¼ èœå“æ—¶æç¤º"ä¸Šä¼ å¤±è´¥"

**è§£å†³æ–¹æ³•ï¼š**

1. **æ£€æŸ¥å­˜å‚¨æƒé™**
   - Android 13+éœ€è¦ `READ_MEDIA_IMAGES` æƒé™
   - Android 6-12éœ€è¦ `READ_EXTERNAL_STORAGE` æƒé™

2. **æ£€æŸ¥uploadsç›®å½•**
   - ç¡®ä¿åç«¯é¡¹ç›®æ ¹ç›®å½•å­˜åœ¨ `uploads` æ–‡ä»¶å¤¹
   - å¦‚æœä¸å­˜åœ¨ï¼Œæ‰‹åŠ¨åˆ›å»ºï¼š
     ```bash
     cd springboot-backend
     mkdir uploads
     ```

3. **æ£€æŸ¥æ–‡ä»¶å¤§å°é™åˆ¶**
   - é»˜è®¤æœ€å¤§10MBï¼Œè¶…è¿‡ä¼šå¤±è´¥
   - å¯åœ¨ `application.yml` ä¿®æ”¹ï¼š
     ```yaml
     spring:
       servlet:
         multipart:
           max-file-size: 20MB
           max-request-size: 20MB
     ```

### é—®é¢˜5ï¼šMavenä¾èµ–ä¸‹è½½ç¼“æ…¢

**è§£å†³æ–¹æ³•ï¼š**

**é…ç½®å›½å†…é•œåƒ** - ç¼–è¾‘ `~/.m2/settings.xml`ï¼š

```xml
<mirrors>
    <mirror>
        <id>aliyun</id>
        <mirrorOf>central</mirrorOf>
        <name>Aliyun Maven</name>
        <url>https://maven.aliyun.com/repository/public</url>
    </mirror>
</mirrors>
```

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
eatwhat/
â”œâ”€â”€ springboot-backend/              # Spring Boot åç«¯
â”‚   â”œâ”€â”€ src/main/java/com/what2eat/
â”‚   â”‚   â”œâ”€â”€ controller/              # REST API æ§åˆ¶å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ AuthController.java      # è®¤è¯æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ DishController.java      # èœå“æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ PushController.java      # æ¨é€æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ FriendController.java    # å¥½å‹æ¥å£
â”‚   â”‚   â”‚   â””â”€â”€ FileController.java      # æ–‡ä»¶ä¸Šä¼ æ¥å£
â”‚   â”‚   â”œâ”€â”€ service/                 # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ UserService.java
â”‚   â”‚   â”‚   â”œâ”€â”€ DishService.java
â”‚   â”‚   â”‚   â”œâ”€â”€ PushService.java
â”‚   â”‚   â”‚   â””â”€â”€ FriendService.java
â”‚   â”‚   â”œâ”€â”€ repository/              # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”œâ”€â”€ entity/                  # æ•°æ®åº“å®ä½“
â”‚   â”‚   â”‚   â”œâ”€â”€ User.java
â”‚   â”‚   â”‚   â”œâ”€â”€ Dish.java
â”‚   â”‚   â”‚   â”œâ”€â”€ Push.java
â”‚   â”‚   â”‚   â””â”€â”€ Friendship.java
â”‚   â”‚   â”œâ”€â”€ dto/                     # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â”‚   â”œâ”€â”€ request/
â”‚   â”‚   â”‚   â””â”€â”€ response/
â”‚   â”‚   â”œâ”€â”€ config/                  # é…ç½®ç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ WebSocketConfig.java
â”‚   â”‚   â”‚   â”œâ”€â”€ SecurityConfig.java
â”‚   â”‚   â”‚   â””â”€â”€ CorsConfig.java
â”‚   â”‚   â””â”€â”€ util/                    # å·¥å…·ç±»
â”‚   â”‚       â””â”€â”€ JwtUtil.java
â”‚   â”œâ”€â”€ src/main/resources/
â”‚   â”‚   â”œâ”€â”€ application.yml          # åº”ç”¨é…ç½®
â”‚   â”‚   â””â”€â”€ uploads/                 # æ–‡ä»¶ä¸Šä¼ ç›®å½•
â”‚   â”œâ”€â”€ pom.xml                      # Maven é…ç½®
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ android-app/                     # Android å‰ç«¯
â”‚   â”œâ”€â”€ app/src/main/
â”‚   â”‚   â”œâ”€â”€ java/com/what2eat/
â”‚   â”‚   â”‚   â”œâ”€â”€ ui/                  # UI å±‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ login/           # ç™»å½•æ³¨å†Œ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ main/            # ä¸»é¡µ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ menu/            # èœå•åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ push/            # æ¨é€åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ qrcode/          # äºŒç»´ç 
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ upload/          # ä¸Šä¼ èœå“
â”‚   â”‚   â”‚   â”œâ”€â”€ data/                # æ•°æ®å±‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ApiService.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ApiResponse.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ User.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Dish.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Push.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Friendship.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ repository/
â”‚   â”‚   â”‚   â””â”€â”€ utils/               # å·¥å…·ç±»
â”‚   â”‚   â”‚       â””â”€â”€ RetrofitClient.java
â”‚   â”‚   â””â”€â”€ res/                     # èµ„æºæ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ layout/              # å¸ƒå±€æ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ values/              # èµ„æºå€¼
â”‚   â”‚       â”œâ”€â”€ drawable/            # å›¾ç‰‡èµ„æº
â”‚   â”‚       â””â”€â”€ mipmap/              # å›¾æ ‡
â”‚   â”œâ”€â”€ app/build.gradle.kts         # åº”ç”¨æ„å»ºé…ç½®
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ init_database.sql                # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ start-backend.bat                # åç«¯å¯åŠ¨è„šæœ¬ï¼ˆWindowsï¼‰
â”œâ”€â”€ claude.md                        # Claude Code é…ç½®
â””â”€â”€ README.md                        # æœ¬æ–‡ä»¶
```

---

## ğŸ”‘ æ ¸å¿ƒä»£ç è¯´æ˜

### åç«¯å…³é”®é…ç½®

#### 1. JWT Tokené…ç½®
```yaml
jwt:
  secret: What2EatSecretKey2026ForJWTTokenGenerationMustBeLongEnough
  expiration: 604800000  # 7å¤©
```

#### 2. æ–‡ä»¶ä¸Šä¼ é…ç½®
```yaml
file:
  upload-dir: ./uploads
  base-url: http://10.88.1.127:8883/api  # ä¿®æ”¹ä¸ºæ‚¨çš„IP
```

#### 3. æ•°æ®åº“é…ç½®
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/what2eat?useSSL=false&serverTimezone=Asia/Shanghai
    username: root
    password: 123456  # ä¿®æ”¹ä¸ºæ‚¨çš„å¯†ç 
```

### Androidå…³é”®é…ç½®

#### 1. ç½‘ç»œé…ç½®
```kotlin
buildConfigField("String", "BASE_URL", "\"http://YOUR_IP:8883/api/\"")
buildConfigField("String", "WS_URL", "\"ws://YOUR_IP:8883/api/ws\"")
```

#### 2. æƒé™é…ç½®
```xml
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.CAMERA" />
```

---

## ğŸ“Š æ•°æ®åº“è¡¨è®¾è®¡

### user - ç”¨æˆ·è¡¨
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| user_id | VARCHAR(255) | ç”¨æˆ·å”¯ä¸€æ ‡è¯†ï¼ˆä¸»é”®ï¼‰ |
| username | VARCHAR(50) | ç”¨æˆ·åï¼ˆå”¯ä¸€ï¼‰ |
| password | VARCHAR(255) | å¯†ç ï¼ˆBCryptåŠ å¯†ï¼‰ |
| nickname | VARCHAR(100) | æ˜µç§° |
| avatar | VARCHAR(500) | å¤´åƒURL |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | TIMESTAMP | æ›´æ–°æ—¶é—´ |

### dish - èœå“è¡¨
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| dish_id | VARCHAR(255) | èœå“å”¯ä¸€æ ‡è¯†ï¼ˆä¸»é”®ï¼‰ |
| name | VARCHAR(100) | èœå“åç§° |
| description | TEXT | æè¿° |
| price | DECIMAL(10,2) | ä»·æ ¼ |
| category | VARCHAR(50) | åˆ†ç±» |
| image_url | VARCHAR(500) | å›¾ç‰‡URL |
| uploader_id | VARCHAR(255) | ä¸Šä¼ è€…IDï¼ˆå¤–é”®ï¼‰ |

### push - æ¨é€è®°å½•è¡¨
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| push_id | VARCHAR(255) | æ¨é€å”¯ä¸€æ ‡è¯†ï¼ˆä¸»é”®ï¼‰ |
| pusher_id | VARCHAR(255) | æ¨é€äººIDï¼ˆå¤–é”®ï¼‰ |
| pusher_name | VARCHAR(100) | æ¨é€äººæ˜µç§° |
| pusher_avatar | VARCHAR(500) | æ¨é€äººå¤´åƒ |
| dishes | JSON | èœå“åˆ—è¡¨ï¼ˆJSONæ ¼å¼ï¼‰ |
| total_amount | DECIMAL(10,2) | æ€»é‡‘é¢ |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ |

### friendship - å¥½å‹å…³ç³»è¡¨
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | VARCHAR(255) | è®°å½•å”¯ä¸€æ ‡è¯†ï¼ˆä¸»é”®ï¼‰ |
| user_id | VARCHAR(255) | ç”¨æˆ·IDï¼ˆå¤–é”®ï¼‰ |
| friend_id | VARCHAR(255) | å¥½å‹IDï¼ˆå¤–é”®ï¼‰ |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ |

**æ³¨æ„ï¼š** å¥½å‹å…³ç³»æ˜¯**åŒå‘**çš„ï¼Œæ·»åŠ å¥½å‹æ—¶ä¼šåˆ›å»ºä¸¤æ¡è®°å½•ã€‚

---

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### åç«¯å¼€å‘

#### æ·»åŠ æ–°çš„APIæ¥å£
1. åœ¨ `controller` åŒ…åˆ›å»ºæ–°çš„Controller
2. åœ¨ `service` åŒ…åˆ›å»ºå¯¹åº”çš„Service
3. åœ¨ `repository` åŒ…åˆ›å»ºRepositoryï¼ˆå¦‚éœ€è¦ï¼‰
4. åœ¨ `entity` åŒ…åˆ›å»ºå®ä½“ï¼ˆå¦‚éœ€è¦ï¼‰

#### ä¿®æ”¹æ•°æ®åº“é…ç½®
ç¼–è¾‘ `application.yml`:
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/what2eat
    username: root
    password: YOUR_PASSWORD
```

#### ä¿®æ”¹ç«¯å£
ç¼–è¾‘ `application.yml`:
```yaml
server:
  port: 8883  # ä¿®æ”¹ä¸ºå…¶ä»–ç«¯å£
```

### Androidå¼€å‘

#### æ·»åŠ æ–°çš„Activity
1. åœ¨ `ui` åŒ…ä¸‹åˆ›å»ºæ–°åŒ…
2. åˆ›å»ºActivityç±»
3. åˆ›å»ºå¯¹åº”çš„å¸ƒå±€æ–‡ä»¶ `res/layout/activity_xxx.xml`
4. åœ¨ `AndroidManifest.xml` æ³¨å†ŒActivity

#### æ·»åŠ æ–°çš„APIè°ƒç”¨
1. åœ¨ `ApiService.java` æ·»åŠ æ¥å£å®šä¹‰
2. åˆ›å»ºå¯¹åº”çš„è¯·æ±‚/å“åº”æ¨¡å‹
3. åœ¨Activityä¸­è°ƒç”¨

#### ä¿®æ”¹ç½‘ç»œé…ç½®
ç¼–è¾‘ `build.gradle.kts`:
```kotlin
buildConfigField("String", "BASE_URL", "\"http://YOUR_IP:8883/api/\"")
```

---

## ğŸ“ˆ APIæ–‡æ¡£

åç«¯å¯åŠ¨åè®¿é—® Swagger UIï¼š
```
http://localhost:8883/api/swagger-ui.html
```

### ä¸»è¦æ¥å£

| æ¨¡å— | è·¯å¾„ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|------|
| **è®¤è¯** | `/api/auth/register` | POST | ç”¨æˆ·æ³¨å†Œ |
| **è®¤è¯** | `/api/auth/login` | POST | ç”¨æˆ·ç™»å½• |
| **è®¤è¯** | `/api/auth/me` | GET | è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ |
| **èœå“** | `/api/dishes` | GET | è·å–èœå“åˆ—è¡¨ |
| **èœå“** | `/api/dishes` | POST | ä¸Šä¼ èœå“ |
| **æ¨é€** | `/api/push/list` | GET | è·å–æ¨é€åˆ—è¡¨ï¼ˆä»…å¥½å‹ï¼‰ |
| **æ¨é€** | `/api/push/{id}` | GET | è·å–æ¨é€è¯¦æƒ… |
| **æ¨é€** | `/api/push` | POST | åˆ›å»ºæ¨é€ |
| **æ¨é€** | `/api/push/{id}` | DELETE | åˆ é™¤æ¨é€ |
| **å¥½å‹** | `/api/friends` | GET | è·å–å¥½å‹åˆ—è¡¨ |
| **å¥½å‹** | `/api/friends/add/{friendId}` | POST | æ·»åŠ å¥½å‹ |
| **å¥½å‹** | `/api/friends/{friendId}` | DELETE | åˆ é™¤å¥½å‹ |
| **æ–‡ä»¶** | `/api/upload/image` | POST | ä¸Šä¼ å›¾ç‰‡ |

---

## ğŸ¨ æŠ€æœ¯äº®ç‚¹

1. **JWTè®¤è¯** - æ— çŠ¶æ€Tokenè®¤è¯ï¼Œå®‰å…¨å¯é 
2. **å¯†ç åŠ å¯†** - BCryptåŠ å¯†å­˜å‚¨ï¼Œç¬¦åˆå®‰å…¨è§„èŒƒ
3. **å¥½å‹å…³ç³»** - åŒå‘å¥½å‹å…³ç³»ï¼Œç¡®ä¿äº’ç›¸å¯è§
4. **æƒé™æ§åˆ¶** - ç»†ç²’åº¦æƒé™æ§åˆ¶ï¼ˆåªèƒ½åˆ é™¤è‡ªå·±çš„æ¨é€ï¼‰
5. **æ¨é€å¯è§æ€§** - åªæœ‰å¥½å‹æ‰èƒ½çœ‹åˆ°å½¼æ­¤çš„æ¨é€ï¼Œä¿æŠ¤éšç§
6. **RESTful API** - æ ‡å‡†çš„RESTæ¥å£è®¾è®¡
7. **æ–‡ä»¶ä¸Šä¼ ** - æ”¯æŒå›¾ç‰‡ä¸Šä¼ å’ŒURLè®¿é—®
8. **æ¨¡å—åŒ–è®¾è®¡** - å‰åç«¯åˆ†ç¦»ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•

---

## ğŸ› å·²çŸ¥é—®é¢˜

- [ ] WebSocketæ¨é€åŠŸèƒ½å·²å®ç°ä½†æœªåœ¨Androidç«¯ä½¿ç”¨
- [ ] æš‚ä¸æ”¯æŒæ¨é€è¯„è®ºåŠŸèƒ½
- [ ] æš‚ä¸æ”¯æŒèœå“æœç´¢åŠŸèƒ½

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2026-01-19)
- âœ… å®Œæˆç”¨æˆ·è®¤è¯æ¨¡å—
- âœ… å®Œæˆèœå“ç®¡ç†æ¨¡å—
- âœ… å®Œæˆæ¨é€è®°å½•æ¨¡å—
- âœ… å®Œæˆå¥½å‹å…³ç³»æ¨¡å—ï¼ˆåŒå‘å¥½å‹ï¼‰
- âœ… å®Œæˆæ–‡ä»¶ä¸Šä¼ æ¨¡å—
- âœ… ä¿®å¤æ¨é€å¯è§æ€§bugï¼ˆåªæ˜¾ç¤ºå¥½å‹æ¨é€ï¼‰
- âœ… ä¿®å¤å¥½å‹å…³ç³»å•å‘bugï¼ˆç°åœ¨åˆ›å»ºåŒå‘å…³ç³»ï¼‰

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æäº¤Pull Request

---

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## ğŸ‘¥ ä½œè€…

**ZhanWeiKai** - [GitHub](https://github.com/ZhanWeiKai)

---

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤Issueã€‚

---

## â­ Star History

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªStaræ”¯æŒä¸€ä¸‹ï¼

---

**é¡¹ç›®å¼€å§‹æ—¥æœŸï¼š** 2026-01-15
**å½“å‰ç‰ˆæœ¬ï¼š** v1.0.0
**å¼€å‘çŠ¶æ€ï¼š** âœ… åŠŸèƒ½å®Œæ•´ï¼Œå¯æ­£å¸¸ä½¿ç”¨
