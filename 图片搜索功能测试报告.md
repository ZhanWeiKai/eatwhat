# AIèœå“å›¾ç‰‡æœç´¢åŠŸèƒ½ - æµ‹è¯•æŠ¥å‘Š

## æµ‹è¯•æ—¶é—´
2026-02-03 15:00-15:10

## æµ‹è¯•ç»“æœæ€»ç»“

### âœ… æ­¥éª¤1ï¼šAIç”Ÿæˆæœç´¢å…³é”®è¯
- **æµ‹è¯•æŸ¥è¯¢**ï¼š"çº¢çƒ§è‚‰"
- **AIç”Ÿæˆå…³é”®è¯**ï¼š"çº¢çƒ§è‚‰èœè°±"
- **çŠ¶æ€**ï¼šâœ… æˆåŠŸ

### âœ… æ­¥éª¤2ï¼šHTMLæå–å’ŒURLéªŒè¯
- **ç™¾åº¦å›¾ç‰‡æœç´¢URL**ï¼š`https://image.baidu.com/search/index?tn=baiduimage&fm=result&ie=utf-8&word=çº¢çƒ§è‚‰èœè°±`
- **HTMLå¤§å°**ï¼š453KBï¼ˆåŒ…å«å®Œæ•´å›¾ç‰‡æ•°æ®ï¼‰
- **æå–URLæ•°é‡**ï¼š10ä¸ª
- **ç¤ºä¾‹URL**ï¼š
  - `https://img0.baidu.com/it/u=374008154,123110911&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=728`
  - `https://img2.baidu.com/it/u=3248196207,3131439770&fm=253&fmt=auto&app=120&f=JPEG?w=889&h=500`
- **URLéªŒè¯**ï¼šHTTP 200, image/jpeg, ~50-110KB
- **çŠ¶æ€**ï¼šâœ… æˆåŠŸ

### âœ… æ­¥éª¤3ï¼šAIé€‰æ‹©æœ€ä½³URL
- **ç¬¬ä¸€æ¬¡AIè°ƒç”¨**ï¼šç”Ÿæˆæœç´¢å…³é”®è¯ "çº¢çƒ§è‚‰èœè°±"
- **ç¬¬äºŒæ¬¡AIè°ƒç”¨**ï¼šä»10ä¸ªURLä¸­é€‰æ‹©æœ€åˆé€‚çš„
- **AIé€‰æ‹©**ï¼šåºå·2ï¼ˆç´¢å¼•1ï¼‰
- **é€‰ä¸­çš„URL**ï¼š`https://img2.baidu.com/it/u=3248196207,3131439770&fm=253&fmt=auto&app=120&f=JPEG?w=889&h=500`
- **URLéªŒè¯**ï¼šHTTP 200, image/jpeg, 110KB
- **çŠ¶æ€**ï¼šâœ… æˆåŠŸ

### âœ… æ­¥éª¤4ï¼šå®Œæ•´WebViewæµç¨‹
- **APKç¼–è¯‘**ï¼šæˆåŠŸ
- **APKå®‰è£…**ï¼šæˆåŠŸ
- **å‰ç«¯å®ç°**ï¼š
  - `searchDishImageAsync()` å‡½æ•°ï¼šå¼‚æ­¥è°ƒç”¨å›¾ç‰‡æœç´¢API
  - `addImageToCurrentMessage()` å‡½æ•°ï¼šä½¿ç”¨createElementæ·»åŠ å›¾ç‰‡ï¼Œé¿å…&è½¬ä¹‰
  - å›¾ç‰‡åŠ è½½äº‹ä»¶ï¼šonload/onerrorå¤„ç†
  - è°ƒç”¨æ—¶æœºï¼šAIæ–‡å­—å›å¤å®Œæˆåå¼‚æ­¥åŠ è½½å›¾ç‰‡
- **çŠ¶æ€**ï¼šâœ… ä»£ç å°±ç»ªï¼Œç­‰å¾…ç”¨æˆ·åœ¨æ‰‹æœºä¸Šæµ‹è¯•

## æŠ€æœ¯å®ç°è¦ç‚¹

### åç«¯ï¼ˆImageSearchService.javaï¼‰
```java
// ç¬¬1æ¬¡AIè°ƒç”¨ï¼šç”Ÿæˆæœå›¾å…³é”®è¯
String keywords = generateSearchKeywords(userQuery);

// ä¸‹è½½ç™¾åº¦å›¾ç‰‡HTMLï¼ˆæ·»åŠ æµè§ˆå™¨è¯·æ±‚å¤´ï¼‰
String html = downloadBaiduImageSearchHtml(keywords);

// æ­£åˆ™æå–å›¾ç‰‡URL
List<String> imageUrls = extractImageUrlsFromHtml(html);

// ç¬¬2æ¬¡AIè°ƒç”¨ï¼šé€‰æ‹©æœ€ä½³å›¾ç‰‡
String bestImageUrl = selectBestImageUrl(userQuery, imageUrls);
```

### å‰ç«¯ï¼ˆchat.html v2.1.0ï¼‰
```javascript
// AIå›å¤å®Œæˆåå¼‚æ­¥æœç´¢å›¾ç‰‡
searchDishImageAsync(userQuery);

// ä½¿ç”¨createElementé¿å…HTMLå®ä½“è½¬ä¹‰
const img = document.createElement('img');
img.src = imageUrl;  // ä¸ä¼šæŠŠ&è½¬æˆ&amp;
```

## æµ‹è¯•API

### è¯·æ±‚ç¤ºä¾‹
```bash
curl -X POST "http://api.jamesweb.org:8883/api/image/search" \
  -H "Content-Type: application/json" \
  -d '{"query":"çº¢çƒ§è‚‰"}'
```

### å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "æœç´¢æˆåŠŸ",
  "data": {
    "query": "çº¢çƒ§è‚‰",
    "imageUrl": "https://img2.baidu.com/it/u/3248196207,3131439770&fm=253&fmt=auto&app=120&f=JPEG?w=889&h=500"
  }
}
```

## å¾…ç”¨æˆ·æµ‹è¯•

è¯·åœ¨æ‰‹æœºä¸Šæ‰§è¡Œä»¥ä¸‹æµ‹è¯•ï¼š

1. **æ‰“å¼€åº”ç”¨** â†’ "ä»Šå¤©åƒä»€ä¹ˆ" â†’ ç‚¹å‡» "AIæ™ºèƒ½åŠ©æ‰‹"
2. **è¾“å…¥èœå“**ï¼š"çº¢çƒ§è‚‰" æˆ– "å®«ä¿é¸¡ä¸" æˆ– "é±¼é¦™è‚‰ä¸"
3. **è§‚å¯Ÿç°è±¡**ï¼š
   - âœ… AIæ–‡å­—å›å¤æ˜¯å¦æ­£å¸¸æ˜¾ç¤ºï¼ˆæ‰“å­—æœºæ•ˆæœï¼‰
   - âœ… æ–‡å­—å›å¤åæ˜¯å¦å‡ºç° "ğŸ“· èœå“å›¾ç‰‡ï¼š"
   - âœ… å›¾ç‰‡æ˜¯å¦æ­£ç¡®åŠ è½½æ˜¾ç¤º
   - âŒ æ˜¯å¦æ˜¾ç¤º"å›¾ç‰‡åŠ è½½å¤±è´¥"

## å·²çŸ¥é—®é¢˜

å¦‚æœå›¾ç‰‡ä»ç„¶ä¸æ˜¾ç¤ºï¼Œå¯èƒ½çš„åŸå› ï¼š
1. **MixedContenté—®é¢˜**ï¼šHTTPSé¡µé¢åŠ è½½HTTPå›¾ç‰‡
   - è§£å†³ï¼šå·²åœ¨Androidå¯ç”¨MixedContent
2. **CORSé—®é¢˜**ï¼šç™¾åº¦å›¾ç‰‡å¯èƒ½ä¸å…è®¸è·¨åŸŸ
   - è§£å†³ï¼šå·²åœ¨WebViewè®¾ç½®å…è®¸è·¨åŸŸ
3. **ç½‘ç»œé—®é¢˜**ï¼šæ‰‹æœºæ— æ³•è®¿é—®ç™¾åº¦å›¾ç‰‡CDN
   - è§£å†³ï¼šæ£€æŸ¥æ‰‹æœºç½‘ç»œè¿æ¥
4. **JavaScripté”™è¯¯**ï¼šå‰ç«¯ä»£ç æ‰§è¡Œå¼‚å¸¸
   - è§£å†³ï¼šä½¿ç”¨WebViewè°ƒè¯•æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—

## ä¸‹ä¸€æ­¥

æ ¹æ®ç”¨æˆ·æµ‹è¯•ç»“æœï¼Œå¦‚æœå›¾ç‰‡ä»ä¸æ˜¾ç¤ºï¼Œéœ€è¦ï¼š
1. å¯ç”¨WebViewè¿œç¨‹è°ƒè¯•æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—
2. æ£€æŸ¥ç½‘ç»œè¯·æ±‚æ˜¯å¦æˆåŠŸ
3. éªŒè¯å›¾ç‰‡URLæ˜¯å¦åœ¨æ‰‹æœºæµè§ˆå™¨ä¸­å¯è®¿é—®
